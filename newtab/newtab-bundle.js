!function(){"use strict";var e,t,n,r,_,o,i,a,l,s,u,c={},d=[],f=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,h=Array.isArray;function p(e,t){for(var n in t)e[n]=t[n];return e}function g(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function v(e,r,_,o,i){var a={type:e,props:r,key:_,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==i?++n:i,__i:-1,__u:0};return null==i&&null!=t.vnode&&t.vnode(a),a}function m(e){return e.children}function w(e,t){this.props=e,this.context=t}function y(e,t){if(null==t)return e.__?y(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?y(e):null}function A(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return A(e)}}function k(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!b.__r++||_!=t.debounceRendering)&&((_=t.debounceRendering)||o)(b)}function b(){for(var e,n,_,o,a,l,s,u=1;r.length;)r.length>u&&r.sort(i),e=r.shift(),u=r.length,e.__d&&(_=void 0,a=(o=(n=e).__v).__e,l=[],s=[],n.__P&&((_=p({},o)).__v=o.__v+1,t.vnode&&t.vnode(_),U(n.__P,_,o,n.__n,n.__P.namespaceURI,32&o.__u?[a]:null,l,null==a?y(o):a,!!(32&o.__u),s),_.__v=o.__v,_.__.__k[_.__i]=_,T(l,_,s),_.__e!=a&&A(_)));b.__r=0}function M(e,t,n,r,_,o,i,a,l,s,u){var f,p,g,w,A,k,b=r&&r.__k||d,M=t.length;for(l=function(e,t,n,r,_){var o,i,a,l,s,u=n.length,c=u,d=0;for(e.__k=new Array(_),o=0;o<_;o++)null!=(i=t[o])&&"boolean"!=typeof i&&"function"!=typeof i?(l=o+d,(i=e.__k[o]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?v(null,i,null,null,null):h(i)?v(m,{children:i},null,null,null):null==i.constructor&&i.__b>0?v(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,a=null,-1!=(s=i.__i=N(i,n,l,c))&&(c--,(a=n[s])&&(a.__u|=2)),null==a||null==a.__v?(-1==s&&(_>u?d--:_<u&&d++),"function"!=typeof i.type&&(i.__u|=4)):s!=l&&(s==l-1?d--:s==l+1?d++:(s>l?d--:d++,i.__u|=4))):e.__k[o]=null;if(c)for(o=0;o<u;o++)null!=(a=n[o])&&!(2&a.__u)&&(a.__e==r&&(r=y(a)),L(a,a));return r}(n,t,b,l,M),f=0;f<M;f++)null!=(g=n.__k[f])&&(p=-1==g.__i?c:b[g.__i]||c,g.__i=f,k=U(e,g,p,_,o,i,a,l,s,u),w=g.__e,g.ref&&p.ref!=g.ref&&(p.ref&&H(p.ref,null,g),u.push(g.ref,g.__c||w,g)),null==A&&null!=w&&(A=w),4&g.__u||p.__k===g.__k?l=x(g,l,e):"function"==typeof g.type&&void 0!==k?l=k:w&&(l=w.nextSibling),g.__u&=-7);return n.__e=A,l}function x(e,t,n){var r,_;if("function"==typeof e.type){for(r=e.__k,_=0;r&&_<r.length;_++)r[_]&&(r[_].__=e,t=x(r[_],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=y(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function N(e,t,n,r){var _,o,i=e.key,a=e.type,l=t[n];if(null===l&&null==e.key||l&&i==l.key&&a==l.type&&!(2&l.__u))return n;if(r>(null==l||2&l.__u?0:1))for(_=n-1,o=n+1;_>=0||o<t.length;){if(_>=0){if((l=t[_])&&!(2&l.__u)&&i==l.key&&a==l.type)return _;_--}if(o<t.length){if((l=t[o])&&!(2&l.__u)&&i==l.key&&a==l.type)return o;o++}}return-1}function C(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||f.test(t)?n:n+"px"}function S(e,t,n,r,_){var o,i;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||C(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||C(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])o=t!=(t=t.replace(a,"$1")),i=t.toLowerCase(),t=i in e||"onFocusOut"==t||"onFocusIn"==t?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=l,e.addEventListener(t,o?u:s,o)):e.removeEventListener(t,o?u:s,o);else{if("http://www.w3.org/2000/svg"==_)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function I(e){return function(n){if(this.l){var r=this.l[n.type+e];if(null==n.t)n.t=l++;else if(n.t<r.u)return;return r(t.event?t.event(n):n)}}}function U(e,n,r,_,o,i,a,l,s,u){var c,d,f,v,y,A,k,b,x,N,C,S,I,U,T,H,L,F=n.type;if(null!=n.constructor)return null;128&r.__u&&(s=!!(32&r.__u),i=[l=n.__e=r.__e]),(c=t.__b)&&c(n);e:if("function"==typeof F)try{if(b=n.props,x="prototype"in F&&F.prototype.render,N=(c=F.contextType)&&_[c.__c],C=c?N?N.props.value:c.__:_,r.__c?k=(d=n.__c=r.__c).__=d.__E:(x?n.__c=d=new F(b,C):(n.__c=d=new w(b,C),d.constructor=F,d.render=R),N&&N.sub(d),d.props=b,d.state||(d.state={}),d.context=C,d.__n=_,f=d.__d=!0,d.__h=[],d._sb=[]),x&&null==d.__s&&(d.__s=d.state),x&&null!=F.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=p({},d.__s)),p(d.__s,F.getDerivedStateFromProps(b,d.__s))),v=d.props,y=d.state,d.__v=n,f)x&&null==F.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),x&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(x&&null==F.getDerivedStateFromProps&&b!==v&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,C),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,C)||n.__v==r.__v){for(n.__v!=r.__v&&(d.props=b,d.state=d.__s,d.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(e){e&&(e.__=n)}),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,C),x&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(v,y,A)})}if(d.context=C,d.props=b,d.__P=e,d.__e=!1,I=t.__r,U=0,x){for(d.state=d.__s,d.__d=!1,I&&I(n),c=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do{d.__d=!1,I&&I(n),c=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++U<25);d.state=d.__s,null!=d.getChildContext&&(_=p(p({},_),d.getChildContext())),x&&!f&&null!=d.getSnapshotBeforeUpdate&&(A=d.getSnapshotBeforeUpdate(v,y)),H=c,null!=c&&c.type===m&&null==c.key&&(H=E(c.props.children)),l=M(e,h(H)?H:[H],n,r,_,o,i,a,l,s,u),d.base=n.__e,n.__u&=-161,d.__h.length&&a.push(d),k&&(d.__E=d.__=null)}catch(e){if(n.__v=null,s||null!=i)if(e.then){for(n.__u|=s?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;i[i.indexOf(l)]=null,n.__e=l}else for(L=i.length;L--;)g(i[L]);else n.__e=r.__e,n.__k=r.__k;t.__e(e,n,r)}else null==i&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):l=n.__e=P(r.__e,n,r,_,o,i,a,s,u);return(c=t.diffed)&&c(n),128&n.__u?void 0:l}function T(e,n,r){for(var _=0;_<r.length;_++)H(r[_],r[++_],r[++_]);t.__c&&t.__c(n,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(e){e.call(n)})}catch(e){t.__e(e,n.__v)}})}function E(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:h(e)?e.map(E):p({},e)}function P(n,r,_,o,i,a,l,s,u){var d,f,p,v,m,w,A,k=_.props,b=r.props,x=r.type;if("svg"==x?i="http://www.w3.org/2000/svg":"math"==x?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=a)for(d=0;d<a.length;d++)if((m=a[d])&&"setAttribute"in m==!!x&&(x?m.localName==x:3==m.nodeType)){n=m,a[d]=null;break}if(null==n){if(null==x)return document.createTextNode(b);n=document.createElementNS(i,x,b.is&&b),s&&(t.__m&&t.__m(r,a),s=!1),a=null}if(null==x)k===b||s&&n.data==b||(n.data=b);else{if(a=a&&e.call(n.childNodes),k=_.props||c,!s&&null!=a)for(k={},d=0;d<n.attributes.length;d++)k[(m=n.attributes[d]).name]=m.value;for(d in k)if(m=k[d],"children"==d);else if("dangerouslySetInnerHTML"==d)p=m;else if(!(d in b)){if("value"==d&&"defaultValue"in b||"checked"==d&&"defaultChecked"in b)continue;S(n,d,null,m,i)}for(d in b)m=b[d],"children"==d?v=m:"dangerouslySetInnerHTML"==d?f=m:"value"==d?w=m:"checked"==d?A=m:s&&"function"!=typeof m||k[d]===m||S(n,d,m,k[d],i);if(f)s||p&&(f.__html==p.__html||f.__html==n.innerHTML)||(n.innerHTML=f.__html),r.__k=[];else if(p&&(n.innerHTML=""),M("template"==r.type?n.content:n,h(v)?v:[v],r,_,o,"foreignObject"==x?"http://www.w3.org/1999/xhtml":i,a,l,a?a[0]:_.__k&&y(_,0),s,u),null!=a)for(d=a.length;d--;)g(a[d]);s||(d="value","progress"==x&&null==w?n.removeAttribute("value"):null!=w&&(w!==n[d]||"progress"==x&&!w||"option"==x&&w!=k[d])&&S(n,d,w,k[d],i),d="checked",null!=A&&A!=n[d]&&S(n,d,A,k[d],i))}return n}function H(e,n,r){try{if("function"==typeof e){var _="function"==typeof e.__u;_&&e.__u(),_&&null==n||(e.__u=e(n))}else e.current=n}catch(e){t.__e(e,r)}}function L(e,n,r){var _,o;if(t.unmount&&t.unmount(e),(_=e.ref)&&(_.current&&_.current!=e.__e||H(_,null,n)),null!=(_=e.__c)){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(e){t.__e(e,n)}_.base=_.__P=null}if(_=e.__k)for(o=0;o<_.length;o++)_[o]&&L(_[o],n,r||"function"!=typeof e.type);r||g(e.__e),e.__c=e.__=e.__e=void 0}function R(e,t,n){return this.constructor(e,n)}function F(n,r,_){var o,i,a;r==document&&(r=document.documentElement),t.__&&t.__(n,r),o=!1?null:r.__k,i=[],a=[],U(r,n=r.__k=function(t,n,r){var _,o,i,a={};for(i in n)"key"==i?_=n[i]:"ref"==i?o=n[i]:a[i]=n[i];if(arguments.length>2&&(a.children=arguments.length>3?e.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return v(t,a,_,o,null)}(m,null,[n]),o||c,c,r.namespaceURI,o?null:r.firstChild?e.call(r.childNodes):null,i,o?o.__e:r.firstChild,false,a),T(i,n,a)}e=d.slice,t={__e:function(e,t,n,r){for(var _,o,i;t=t.__;)if((_=t.__c)&&!_.__)try{if((o=_.constructor)&&null!=o.getDerivedStateFromError&&(_.setState(o.getDerivedStateFromError(e)),i=_.__d),null!=_.componentDidCatch&&(_.componentDidCatch(e,r||{}),i=_.__d),i)return _.__E=_}catch(t){e=t}throw e}},n=0,w.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=p({},this.state),"function"==typeof e&&(e=e(p({},n),this.props)),e&&p(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),k(this))},w.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),k(this))},w.prototype.render=m,r=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=function(e,t){return e.__v.__b-t.__v.__b},b.__r=0,a=/(PointerCapture)$|Capture$/i,l=0,s=I(!1),u=I(!0);var D=0;function W(e,n,r,_,o,i){n||(n={});var a,l,s=n;if("ref"in s)for(l in s={},n)"ref"==l?a=n[l]:s[l]=n[l];var u={type:e,props:s,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--D,__i:-1,__u:0,__source:o,__self:i};if("function"==typeof e&&(a=e.defaultProps))for(l in a)void 0===s[l]&&(s[l]=a[l]);return t.vnode&&t.vnode(u),u}var O,V,B,j,q=0,$=[],z=t,Y=z.__b,Z=z.__r,G=z.diffed,K=z.__c,J=z.unmount,Q=z.__;function X(e,t){z.__h&&z.__h(V,e,q||t),q=0;var n=V.__H||(V.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ee(e){return q=1,function(e,t){var n=X(O++,2);if(n.t=e,!n.__c&&(n.__=[ue(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],r=n.t(t,e);t!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=V,!V.__f)){var r=function(e,t,r){if(!n.__c.__H)return!0;var o=n.__c.__H.__.filter(function(e){return!!e.__c});if(o.every(function(e){return!e.__N}))return!_||_.call(this,e,t,r);var i=n.__c.props!==e;return o.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}}),_&&_.call(this,e,t,r)||i};V.__f=!0;var _=V.shouldComponentUpdate,o=V.componentWillUpdate;V.componentWillUpdate=function(e,t,n){if(this.__e){var i=_;_=void 0,r(e,t,n),_=i}o&&o.call(this,e,t,n)},V.shouldComponentUpdate=r}return n.__N||n.__}(ue,e)}function te(e,t){var n=X(O++,3);!z.__s&&se(n.__H,t)&&(n.__=e,n.u=t,V.__H.__h.push(n))}function ne(e,t){var n=X(O++,7);return se(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function re(e,t){return q=8,ne(function(){return e},t)}function _e(){for(var e;e=$.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ae),e.__H.__h.forEach(le),e.__H.__h=[]}catch(t){e.__H.__h=[],z.__e(t,e.__v)}}z.__b=function(e){V=null,Y&&Y(e)},z.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Q&&Q(e,t)},z.__r=function(e){Z&&Z(e),O=0;var t=(V=e.__c).__H;t&&(B===V?(t.__h=[],V.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(ae),t.__h.forEach(le),t.__h=[],O=0)),B=V},z.diffed=function(e){G&&G(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==$.push(t)&&j===z.requestAnimationFrame||((j=z.requestAnimationFrame)||ie)(_e)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),B=V=null},z.__c=function(e,t){t.some(function(e){try{e.__h.forEach(ae),e.__h=e.__h.filter(function(e){return!e.__||le(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],z.__e(n,e.__v)}}),K&&K(e,t)},z.unmount=function(e){J&&J(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{ae(e)}catch(e){t=e}}),n.__H=void 0,t&&z.__e(t,n.__v))};var oe="function"==typeof requestAnimationFrame;function ie(e){var t,n=function(){clearTimeout(r),oe&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);oe&&(t=requestAnimationFrame(n))}function ae(e){var t=V,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),V=t}function le(e){var t=V;e.__c=e.__(),V=t}function se(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function ue(e,t){return"function"==typeof t?t(e):t}function ce({message:e="Loading artwork..."}){return W("div",{id:"loading",className:"loading",children:[W("div",{className:"loading-spinner"}),W("p",{children:e})]})}function de({message:e}){return W("div",{className:"loading",children:W("p",{style:{color:"#ff6b6b"},children:e})})}function fe({asset:e,imageUrl:t,onRotate:n,onInfo:r,onSettings:_}){return W("div",{id:"main-content",className:"main-content",onKeyDown:e=>{" "!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),n())},tabIndex:0,children:[W("div",{id:"background-container",className:"background-container",children:W("img",{id:"background-image",className:"background-image",src:t||void 0,alt:e?.title||"Artwork"})}),W("div",{id:"art-info",className:"art-info",children:[W("div",{className:"art-details",children:[W("h1",{id:"art-title",className:"art-title",children:e?.title||"Untitled"}),W("p",{id:"art-creator",className:"art-creator",children:e?.creator||"Unknown Artist"}),W("p",{id:"art-attribution",className:"art-attribution",children:e?.attribution||""})]}),W("div",{className:"art-actions",children:[W("button",{id:"rotate-btn",className:"action-btn rotate-btn",title:"Next artwork",onClick:n,children:W("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[W("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),W("path",{d:"M21 3v5h-5"}),W("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),W("path",{d:"M3 21v-5h5"})]})}),W("button",{id:"info-btn",className:"action-btn info-btn",title:"Learn more",onClick:r,children:W("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[W("circle",{cx:"12",cy:"12",r:"10"}),W("path",{d:"M12 16v-4"}),W("path",{d:"M12 8h.01"})]})}),W("button",{id:"settings-btn",className:"action-btn settings-btn",title:"Settings",onClick:_,children:W("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[W("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),W("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"})]})})]})]})]})}function he({isOpen:e,onClose:t,userSettings:n,onProviderChange:r,onTurnoverChange:_}){if(!e)return null;return W("div",{id:"settings-modal",className:"modal",children:W("div",{className:"modal-content",children:[W("div",{className:"modal-header",children:[W("h2",{children:"Settings"}),W("button",{id:"close-settings",className:"close-btn",onClick:t,children:"Ã—"})]}),W("div",{className:"modal-body",children:[W("div",{className:"setting-item",children:[W("label",{htmlFor:"art-provider",children:"Art Provider"}),W("select",{id:"art-provider",value:n.ART_PROVIDER||"google-arts",onChange:async e=>{const t=e.currentTarget.value;await r(t)},children:[W("option",{value:"google-arts",children:"Google Arts & Culture"}),W("option",{value:"met-museum",children:"Metropolitan Museum of Art"})]})]}),W("div",{className:"setting-item",children:[W("label",{htmlFor:"turnover-always",children:"Always show new artwork on new tab"}),W("input",{type:"checkbox",id:"turnover-always",checked:n.TURNOVER_ALWAYS||!1,onChange:async e=>{const t=e.currentTarget.checked;await _(t),chrome.runtime.sendMessage({type:"userSettingsUpdate",payload:{key:"TURNOVER_ALWAYS",value:t}})}})]})]})]})})}function pe(){const[e,t]=ee(!1),{state:n,initializeApp:r,rotateToNextImage:_,switchProvider:o,updateState:i}=function(){const[e,t]=ee({currentAssetIndex:0,totalAssets:0,currentAsset:null,userSettings:{},imageUrl:null,loading:!0,error:null}),n=re(e=>{t(t=>({...t,...e}))},[]),r=re(e=>{n({error:e,loading:!1})},[n]),_=re(e=>{n({loading:e,error:null})},[n]),o=re(async()=>{try{_(!0);const e=await window.ArtManager.instance.getUserSettings();if(n({userSettings:e}),!await window.ArtManager.instance.syncData())throw new Error("Failed to sync asset data");const t=await window.ArtManager.instance.syncedAssetCount();if(0===t)throw new Error("No assets available from current provider");const r=await window.ArtManager.instance.getCurrentIndex();n({totalAssets:t,currentAssetIndex:r}),chrome.runtime.sendMessage({type:"requestCurrentAsset"},t=>{t&&void 0!==t.currentAssetIndex&&n({currentAssetIndex:t.currentAssetIndex}),e.TURNOVER_ALWAYS?a():i()})}catch(e){console.error("Failed to initialize app:",e),r("Failed to load artwork")}},[n,_,r]),i=re(async()=>{try{const e=await window.ArtManager.instance.getCurrentIndex(),t=await window.ArtManager.instance.syncedAssetCount();let r=e;r>=t&&(r=0,await window.ArtManager.instance.setCurrentIndex(0));let _=await window.ArtManager.instance.getAsset(r);if(!_){let e=0;const n=10;for(;!_&&e<n;)r++,r>=t&&(r=0),_=await window.ArtManager.instance.getAsset(r),e++;if(!_)throw new Error("No valid assets available from current provider");await window.ArtManager.instance.setCurrentIndex(r)}await window.ArtManager.instance.loadImage(r);const o=await window.ArtManager.instance.getDisplayImageUrl(r);n({currentAssetIndex:r,totalAssets:t,currentAsset:_,imageUrl:o,loading:!1,error:null})}catch(e){console.error("Failed to display current image:",e),r("Failed to load artwork. Please try refreshing the page.")}},[n,r]),a=re(async()=>{try{const e=await window.ArtManager.instance.getCurrentIndex();chrome.runtime.sendMessage({type:"rotateImage",payload:{currentAssetIndex:e}})}catch(e){console.error("Failed to rotate image:",e)}},[]),l=re(async t=>{try{_(!0);const r={...e.userSettings,ART_PROVIDER:t};n({userSettings:r}),await window.ArtManager.instance.setCurrentProvider(t),await window.ArtManager.instance.setCurrentIndex(0),await window.ArtManager.instance.syncData();const o=await window.ArtManager.instance.syncedAssetCount();if(n({currentAssetIndex:0,totalAssets:o}),o>0)await window.ArtManager.instance.loadImage(0),await i();else{const e=async()=>{const t=await window.ArtManager.instance.syncedAssetCount();t>0?(n({totalAssets:t}),await i()):setTimeout(e,1e3)};e()}chrome.runtime.sendMessage({type:"userSettingsUpdate",payload:{key:"ART_PROVIDER",value:t}})}catch(e){console.error("Failed to switch provider:",e),r("Failed to switch provider")}},[e.userSettings,n,_,r,i]),s=re(async e=>{const t=void 0!==e?e:await window.ArtManager.instance.getCurrentIndex();void 0!==e&&await window.ArtManager.instance.setCurrentIndex(e),n({currentAssetIndex:t}),setTimeout(()=>i(),0)},[n,i]);return te(()=>{const e=e=>{"updateAsset"===e.type&&s(e.payload?.newAssetIndex)};return chrome.runtime.onMessage.addListener(e),()=>chrome.runtime.onMessage.removeListener(e)},[s]),{state:e,initializeApp:o,displayCurrentImage:i,rotateToNextImage:a,switchProvider:l,setError:r,setLoading:_,updateState:n}}();te(()=>{r()},[r]);return n.loading?W(ce,{}):n.error?W(de,{message:n.error}):W(m,{children:[W(fe,{asset:n.currentAsset,imageUrl:n.imageUrl,onRotate:_,onInfo:async()=>{const e=await window.ArtManager.instance.getDetailsUrl(n.currentAssetIndex);e&&chrome.tabs.create({url:e})},onSettings:()=>t(!0)}),W(he,{isOpen:e,onClose:()=>t(!1),userSettings:n.userSettings,onProviderChange:o,onTurnoverChange:async e=>{const t={...n.userSettings,TURNOVER_ALWAYS:e};i({userSettings:t}),await window.ArtManager.instance.setTurnoverAlways(e)}})]})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("app");e&&F(W(pe,{}),e)})}();
