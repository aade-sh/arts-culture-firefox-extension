(function(){"use strict";var M,p,ie,S,oe,_e,le,ae,J,G,Z,x={},se=[],Ee=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,D=Array.isArray;function I(t,e){for(var r in e)t[r]=e[r];return t}function K(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function He(t,e,r){var n,_,i,l={};for(i in e)i=="key"?n=e[i]:i=="ref"?_=e[i]:l[i]=e[i];if(arguments.length>2&&(l.children=arguments.length>3?M.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)l[i]===void 0&&(l[i]=t.defaultProps[i]);return T(t,l,n,_,null)}function T(t,e,r,n,_){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:_??++ie,__i:-1,__u:0};return _==null&&p.vnode!=null&&p.vnode(i),i}function $(t){return t.children}function R(t,e){this.props=t,this.context=e}function P(t,e){if(e==null)return t.__?P(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?P(t):null}function ce(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return ce(t)}}function ue(t){(!t.__d&&(t.__d=!0)&&S.push(t)&&!O.__r++||oe!=p.debounceRendering)&&((oe=p.debounceRendering)||_e)(O)}function O(){for(var t,e,r,n,_,i,l,a=1;S.length;)S.length>a&&S.sort(le),t=S.shift(),a=S.length,t.__d&&(r=void 0,_=(n=(e=t).__v).__e,i=[],l=[],e.__P&&((r=I({},n)).__v=n.__v+1,p.vnode&&p.vnode(r),Q(e.__P,r,n,e.__n,e.__P.namespaceURI,32&n.__u?[_]:null,i,_??P(n),!!(32&n.__u),l),r.__v=n.__v,r.__.__k[r.__i]=r,me(i,r,l),r.__e!=_&&ce(r)));O.__r=0}function de(t,e,r,n,_,i,l,a,s,c,h){var o,f,d,b,U,k,m=n&&n.__k||se,g=e.length;for(s=Me(r,e,m,s,g),o=0;o<g;o++)(d=r.__k[o])!=null&&(f=d.__i==-1?x:m[d.__i]||x,d.__i=o,k=Q(t,d,f,_,i,l,a,s,c,h),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&X(f.ref,null,d),h.push(d.ref,d.__c||b,d)),U==null&&b!=null&&(U=b),4&d.__u||f.__k===d.__k?s=he(d,s,t):typeof d.type=="function"&&k!==void 0?s=k:b&&(s=b.nextSibling),d.__u&=-7);return r.__e=U,s}function Me(t,e,r,n,_){var i,l,a,s,c,h=r.length,o=h,f=0;for(t.__k=new Array(_),i=0;i<_;i++)(l=e[i])!=null&&typeof l!="boolean"&&typeof l!="function"?(s=i+f,(l=t.__k[i]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?T(null,l,null,null,null):D(l)?T($,{children:l},null,null,null):l.constructor==null&&l.__b>0?T(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=t,l.__b=t.__b+1,a=null,(c=l.__i=De(l,r,s,o))!=-1&&(o--,(a=r[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(_>h?f--:_<h&&f++),typeof l.type!="function"&&(l.__u|=4)):c!=s&&(c==s-1?f--:c==s+1?f++:(c>s?f--:f++,l.__u|=4))):t.__k[i]=null;if(o)for(i=0;i<h;i++)(a=r[i])!=null&&(2&a.__u)==0&&(a.__e==n&&(n=P(a)),ve(a,a));return n}function he(t,e,r){var n,_;if(typeof t.type=="function"){for(n=t.__k,_=0;n&&_<n.length;_++)n[_]&&(n[_].__=t,e=he(n[_],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=P(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function De(t,e,r,n){var _,i,l=t.key,a=t.type,s=e[r];if(s===null&&t.key==null||s&&l==s.key&&a==s.type&&(2&s.__u)==0)return r;if(n>(s!=null&&(2&s.__u)==0?1:0))for(_=r-1,i=r+1;_>=0||i<e.length;){if(_>=0){if((s=e[_])&&(2&s.__u)==0&&l==s.key&&a==s.type)return _;_--}if(i<e.length){if((s=e[i])&&(2&s.__u)==0&&l==s.key&&a==s.type)return i;i++}}return-1}function fe(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||Ee.test(e)?r:r+"px"}function F(t,e,r,n,_){var i,l;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||fe(t.style,e,"");if(r)for(e in r)n&&r[e]==n[e]||fe(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(ae,"$1")),l=e.toLowerCase(),e=l in t||e=="onFocusOut"||e=="onFocusIn"?l.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n?r.u=n.u:(r.u=J,t.addEventListener(e,i?Z:G,i)):t.removeEventListener(e,i?Z:G,i);else{if(_=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function pe(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=J++;else if(e.t<r.u)return;return r(p.event?p.event(e):e)}}}function Q(t,e,r,n,_,i,l,a,s,c){var h,o,f,d,b,U,k,m,g,C,N,j,L,Le,q,E,ne,w=e.type;if(e.constructor!=null)return null;128&r.__u&&(s=!!(32&r.__u),i=[a=e.__e=r.__e]),(h=p.__b)&&h(e);e:if(typeof w=="function")try{if(m=e.props,g="prototype"in w&&w.prototype.render,C=(h=w.contextType)&&n[h.__c],N=h?C?C.props.value:h.__:n,r.__c?k=(o=e.__c=r.__c).__=o.__E:(g?e.__c=o=new w(m,N):(e.__c=o=new R(m,N),o.constructor=w,o.render=Re),C&&C.sub(o),o.props=m,o.state||(o.state={}),o.context=N,o.__n=n,f=o.__d=!0,o.__h=[],o._sb=[]),g&&o.__s==null&&(o.__s=o.state),g&&w.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=I({},o.__s)),I(o.__s,w.getDerivedStateFromProps(m,o.__s))),d=o.props,b=o.state,o.__v=e,f)g&&w.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),g&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(g&&w.getDerivedStateFromProps==null&&m!==d&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(m,N),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(m,o.__s,N)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(o.props=m,o.state=o.__s,o.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(H){H&&(H.__=e)}),j=0;j<o._sb.length;j++)o.__h.push(o._sb[j]);o._sb=[],o.__h.length&&l.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(m,o.__s,N),g&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(d,b,U)})}if(o.context=N,o.props=m,o.__P=t,o.__e=!1,L=p.__r,Le=0,g){for(o.state=o.__s,o.__d=!1,L&&L(e),h=o.render(o.props,o.state,o.context),q=0;q<o._sb.length;q++)o.__h.push(o._sb[q]);o._sb=[]}else do o.__d=!1,L&&L(e),h=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++Le<25);o.state=o.__s,o.getChildContext!=null&&(n=I(I({},n),o.getChildContext())),g&&!f&&o.getSnapshotBeforeUpdate!=null&&(U=o.getSnapshotBeforeUpdate(d,b)),E=h,h!=null&&h.type===$&&h.key==null&&(E=ge(h.props.children)),a=de(t,D(E)?E:[E],e,r,n,_,i,l,a,s,c),o.base=e.__e,e.__u&=-161,o.__h.length&&l.push(o),k&&(o.__E=o.__=null)}catch(H){if(e.__v=null,s||i!=null)if(H.then){for(e.__u|=s?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,e.__e=a}else for(ne=i.length;ne--;)K(i[ne]);else e.__e=r.__e,e.__k=r.__k;p.__e(H,e,r)}else i==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=Te(r.__e,e,r,n,_,i,l,s,c);return(h=p.diffed)&&h(e),128&e.__u?void 0:a}function me(t,e,r){for(var n=0;n<r.length;n++)X(r[n],r[++n],r[++n]);p.__c&&p.__c(e,t),t.some(function(_){try{t=_.__h,_.__h=[],t.some(function(i){i.call(_)})}catch(i){p.__e(i,_.__v)}})}function ge(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:D(t)?t.map(ge):I({},t)}function Te(t,e,r,n,_,i,l,a,s){var c,h,o,f,d,b,U,k=r.props,m=e.props,g=e.type;if(g=="svg"?_="http://www.w3.org/2000/svg":g=="math"?_="http://www.w3.org/1998/Math/MathML":_||(_="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((d=i[c])&&"setAttribute"in d==!!g&&(g?d.localName==g:d.nodeType==3)){t=d,i[c]=null;break}}if(t==null){if(g==null)return document.createTextNode(m);t=document.createElementNS(_,g,m.is&&m),a&&(p.__m&&p.__m(e,i),a=!1),i=null}if(g==null)k===m||a&&t.data==m||(t.data=m);else{if(i=i&&M.call(t.childNodes),k=r.props||x,!a&&i!=null)for(k={},c=0;c<t.attributes.length;c++)k[(d=t.attributes[c]).name]=d.value;for(c in k)if(d=k[c],c!="children"){if(c=="dangerouslySetInnerHTML")o=d;else if(!(c in m)){if(c=="value"&&"defaultValue"in m||c=="checked"&&"defaultChecked"in m)continue;F(t,c,null,d,_)}}for(c in m)d=m[c],c=="children"?f=d:c=="dangerouslySetInnerHTML"?h=d:c=="value"?b=d:c=="checked"?U=d:a&&typeof d!="function"||k[c]===d||F(t,c,d,k[c],_);if(h)a||o&&(h.__html==o.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(o&&(t.innerHTML=""),de(e.type=="template"?t.content:t,D(f)?f:[f],e,r,n,g=="foreignObject"?"http://www.w3.org/1999/xhtml":_,i,l,i?i[0]:r.__k&&P(r,0),a,s),i!=null)for(c=i.length;c--;)K(i[c]);a||(c="value",g=="progress"&&b==null?t.removeAttribute("value"):b!=null&&(b!==t[c]||g=="progress"&&!b||g=="option"&&b!=k[c])&&F(t,c,b,k[c],_),c="checked",U!=null&&U!=t[c]&&F(t,c,U,k[c],_))}return t}function X(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(_){p.__e(_,r)}}function ve(t,e,r){var n,_;if(p.unmount&&p.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||X(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){p.__e(i,e)}n.base=n.__P=null}if(n=t.__k)for(_=0;_<n.length;_++)n[_]&&ve(n[_],e,r||typeof t.type!="function");r||K(t.__e),t.__c=t.__=t.__e=void 0}function Re(t,e,r){return this.constructor(t,r)}function Oe(t,e,r){var n,_,i,l;e==document&&(e=document.documentElement),p.__&&p.__(t,e),_=(n=!1)?null:e.__k,i=[],l=[],Q(e,t=e.__k=He($,null,[t]),_||x,x,e.namespaceURI,_?null:e.firstChild?M.call(e.childNodes):null,i,_?_.__e:e.firstChild,n,l),me(i,t,l)}M=se.slice,p={__e:function(t,e,r,n){for(var _,i,l;e=e.__;)if((_=e.__c)&&!_.__)try{if((i=_.constructor)&&i.getDerivedStateFromError!=null&&(_.setState(i.getDerivedStateFromError(t)),l=_.__d),_.componentDidCatch!=null&&(_.componentDidCatch(t,n||{}),l=_.__d),l)return _.__E=_}catch(a){t=a}throw t}},ie=0,R.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=I({},this.state),typeof t=="function"&&(t=t(I({},r),this.props)),t&&I(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),ue(this))},R.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ue(this))},R.prototype.render=$,S=[],_e=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,le=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,ae=/(PointerCapture)$|Capture$/i,J=0,G=pe(!1),Z=pe(!0);var Fe=0;function u(t,e,r,n,_,i){e||(e={});var l,a,s=e;if("ref"in s)for(a in s={},e)a=="ref"?l=e[a]:s[a]=e[a];var c={type:t,props:s,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Fe,__i:-1,__u:0,__source:_,__self:i};if(typeof t=="function"&&(l=t.defaultProps))for(a in l)s[a]===void 0&&(s[a]=l[a]);return p.vnode&&p.vnode(c),c}var A,v,Y,ye,V=0,be=[],y=p,ke=y.__b,Ue=y.__r,we=y.diffed,Ie=y.__c,Ne=y.unmount,Se=y.__;function ee(t,e){y.__h&&y.__h(v,t,V||e),V=0;var r=v.__H||(v.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function Pe(t){return V=1,Ve(Ae,t)}function Ve(t,e,r){var n=ee(A++,2);if(n.t=t,!n.__c&&(n.__=[Ae(void 0,e),function(a){var s=n.__N?n.__N[0]:n.__[0],c=n.t(s,a);s!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=v,!v.__f)){var _=function(a,s,c){if(!n.__c.__H)return!0;var h=n.__c.__H.__.filter(function(f){return!!f.__c});if(h.every(function(f){return!f.__N}))return!i||i.call(this,a,s,c);var o=n.__c.props!==a;return h.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(o=!0)}}),i&&i.call(this,a,s,c)||o};v.__f=!0;var i=v.shouldComponentUpdate,l=v.componentWillUpdate;v.componentWillUpdate=function(a,s,c){if(this.__e){var h=i;i=void 0,_(a,s,c),i=h}l&&l.call(this,a,s,c)},v.shouldComponentUpdate=_}return n.__N||n.__}function We(t,e){var r=ee(A++,3);!y.__s&&$e(r.__H,e)&&(r.__=t,r.u=e,v.__H.__h.push(r))}function Be(t,e){var r=ee(A++,7);return $e(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function te(t,e){return V=8,Be(function(){return t},e)}function ze(){for(var t;t=be.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(re),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){v=null,ke&&ke(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Se&&Se(t,e)},y.__r=function(t){Ue&&Ue(t),A=0;var e=(v=t.__c).__H;e&&(Y===v?(e.__h=[],v.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(re),e.__h=[],A=0)),Y=v},y.diffed=function(t){we&&we(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(be.push(e)!==1&&ye===y.requestAnimationFrame||((ye=y.requestAnimationFrame)||je)(ze)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Y=v=null},y.__c=function(t,e){e.some(function(r){try{r.__h.forEach(W),r.__h=r.__h.filter(function(n){return!n.__||re(n)})}catch(n){e.some(function(_){_.__h&&(_.__h=[])}),e=[],y.__e(n,r.__v)}}),Ie&&Ie(t,e)},y.unmount=function(t){Ne&&Ne(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{W(n)}catch(_){e=_}}),r.__H=void 0,e&&y.__e(e,r.__v))};var xe=typeof requestAnimationFrame=="function";function je(t){var e,r=function(){clearTimeout(n),xe&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,35);xe&&(e=requestAnimationFrame(r))}function W(t){var e=v,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),v=e}function re(t){var e=v;t.__c=t.__(),v=e}function $e(t,e){return!t||t.length!==e.length||e.some(function(r,n){return r!==t[n]})}function Ae(t,e){return typeof e=="function"?e(t):e}class B{constructor(e){this.id=e.id||this.generateId(),this.title=e.title||"Untitled",this.creator=e.creator||"Unknown Artist",this.attribution=e.attribution||"",this.remoteImageUrl=e.image||"",this.detailsUrl=e.link||"",this.provider="google-arts"}static fromApiResponse(e){return new B(e)}generateId(){return Math.random().toString(36).substr(2,9)}async isImageCached(){return!!await(await caches.open(`${this.provider}-images`)).match(this.getProcessedImageUrl())}async getDisplayImageUrl(){const r=await(await caches.open(`${this.provider}-images`)).match(this.getProcessedImageUrl());if(r){const n=await r.blob();return URL.createObjectURL(n)}return this.getProcessedImageUrl()}getProcessedImageUrl(){return this.remoteImageUrl?this.remoteImageUrl+"=s1920-rw":""}getDetailsUrl(){return`https://artsandculture.google.com/asset/${this.detailsUrl}`}toJSON(){return{id:this.id,title:this.title,creator:this.creator,attribution:this.attribution,remoteImageUrl:this.remoteImageUrl,detailsUrl:this.detailsUrl,provider:this.provider}}static fromJSON(e){return new B({id:e.id,title:e.title,creator:e.creator,attribution:e.attribution,image:e.remoteImageUrl,link:e.detailsUrl})}isValid(){return!!(this.remoteImageUrl&&this.title)}}class z{constructor(e){this.id=e.objectID?.toString()||this.generateId(),this.title=e.title||"Untitled",this.creator=this.extractArtist(e),this.attribution=this.extractAttribution(e),this.remoteImageUrl=e.primaryImage||"",this.detailsUrl=e.objectURL||"",this.provider="met-museum"}static fromApiResponse(e){return new z(e)}generateId(){return Math.random().toString(36).substr(2,9)}extractArtist(e){return e.artistDisplayName||e.constituents&&e.constituents[0]?.name||"Unknown Artist"}extractAttribution(e){const r=[e.culture,e.period,e.dynasty,e.reign].filter(Boolean);return r.length>0?r.join(", "):e.creditLine||""}async isImageCached(){return!!await(await caches.open(`${this.provider}-images`)).match(this.getProcessedImageUrl())}async getDisplayImageUrl(){const e=this.getProcessedImageUrl();if(!e)return null;const n=await(await caches.open(`${this.provider}-images`)).match(e);if(n){const _=await n.blob();return URL.createObjectURL(_)}return e}getProcessedImageUrl(){return this.remoteImageUrl}getDetailsUrl(){return this.detailsUrl}toJSON(){return{id:this.id,title:this.title,creator:this.creator,attribution:this.attribution,remoteImageUrl:this.remoteImageUrl,detailsUrl:this.detailsUrl,provider:this.provider}}static fromJSON(e){const r=new z({objectID:parseInt(e.id,10),title:e.title,artistDisplayName:e.creator,primaryImage:e.remoteImageUrl,objectURL:e.detailsUrl});return r.attribution=e.attribution,r}isValid(){return!!(this.remoteImageUrl&&this.title)}isPublicDomain(e){return e.isPublicDomain===!0}hasImage(e){return!!(e.primaryImage&&e.primaryImage.trim()!=="")}static isValidForDisplay(e){return!!(e.primaryImage&&e.primaryImage.trim()!==""&&e.isPublicDomain===!0)}}function Ce(t){switch(t.provider){case"google-arts":return B.fromJSON(t);case"met-museum":return z.fromJSON(t);default:throw new Error(`Unknown art provider: ${t.provider}`)}}function qe(){const[t,e]=Pe({currentAsset:null,imageUrl:null,loading:!0,error:null,totalAssets:0,currentIndex:0,userSettings:{}}),r=te(async()=>{e(i=>({...i,loading:!0,error:null}));try{await chrome.runtime.sendMessage({type:"initializeArt"})}catch{console.error("Error sending message to event listeners while initializing art"),e(l=>({...l,error:"Failed to initialize art",loading:!1}))}},[]),n=te(async()=>{try{chrome.runtime.sendMessage({type:"rotateToNext"})}catch{console.error("Error sending message to event listeners whicle rotating")}},[]),_=te(async i=>{try{e(l=>({...l,loading:!0,error:null})),await chrome.runtime.sendMessage({type:"switchProvider",provider:i})}catch{console.error("Error sending message to event listeners whicle switching providers"),e(a=>({...a,loading:!1,error:"Error sending message to event listeners while switching providers"}))}},[]);return We(()=>{const i=l=>{if(l.type==="initializeArtResponse")if(l.data.error)e(a=>({...a,error:l.data.error||null,loading:!1}));else{const a=l.data.asset?Ce(l.data.asset):null;e(s=>({...s,currentAsset:a,imageUrl:l.data.imageUrl||null,totalAssets:l.data.totalAssets||0,currentIndex:l.data.currentIndex||0,userSettings:l.data.userSettings||{},loading:!1,error:null}))}else if(l.type==="artUpdated"){const a=Ce(l.asset);e(s=>({...s,currentAsset:a,imageUrl:l.imageUrl,totalAssets:l.totalAssets,currentIndex:l.currentIndex,userSettings:l.userSettings,loading:!1,error:null}))}};return chrome.runtime.onMessage.addListener(i),r(),()=>chrome.runtime.onMessage.removeListener(i)},[r]),{...t,rotateToNext:n,switchProvider:_,initializeArt:r}}function Je({message:t="Loading artwork..."}){return u("div",{id:"loading",className:"loading",children:[u("div",{className:"loading-spinner"}),u("p",{children:t})]})}function Ge({message:t}){return u("div",{className:"loading",children:u("p",{style:{color:"#ff6b6b"},children:t})})}function Ze({asset:t,imageUrl:e,loading:r,error:n,onRotate:_,onInfo:i,onSettings:l}){return u("div",{id:"main-content",className:"main-content",onKeyDown:s=>{(s.key===" "||s.key==="ArrowRight")&&(s.preventDefault(),_())},tabIndex:0,children:[u("div",{id:"background-container",className:"background-container",children:[u("img",{id:"background-image",className:"background-image",src:e||void 0,alt:t?.title||"Artwork"}),r&&e&&u("div",{className:"loading-overlay",children:u("div",{className:"loading-spinner"})}),n&&e&&u("div",{className:"error-overlay",children:u("div",{className:"error-message",children:n})})]}),u("div",{id:"art-info",className:"art-info",children:[u("div",{className:"art-details",children:[u("h1",{id:"art-title",className:"art-title",children:t?.title||"Untitled"}),u("p",{id:"art-creator",className:"art-creator",children:t?.creator||"Unknown Artist"}),u("p",{id:"art-attribution",className:"art-attribution",children:t?.attribution||""})]}),u("div",{className:"art-actions",children:[u("button",{id:"rotate-btn",className:"action-btn rotate-btn",title:"Next artwork",onClick:_,disabled:r,children:u("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),u("path",{d:"M21 3v5h-5"}),u("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),u("path",{d:"M3 21v-5h5"})]})}),u("button",{id:"info-btn",className:"action-btn info-btn",title:"Learn more",onClick:i,children:u("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})})}),u("button",{id:"settings-btn",className:"action-btn settings-btn",title:"Settings",onClick:l,children:u("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),u("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z"})]})})]})]})]})}const Ke={GOOGLE_ARTS:"google-arts"}.GOOGLE_ARTS;function Qe({isOpen:t,onClose:e,userSettings:r,onProviderChange:n}){if(!t)return null;const _=async i=>{const l=i.currentTarget.value;await n(l)};return u("div",{id:"settings-modal",className:"modal",children:u("div",{className:"modal-content",children:[u("div",{className:"modal-header",children:[u("h2",{children:"Settings"}),u("button",{id:"close-settings",className:"close-btn",onClick:e,children:"Ã—"})]}),u("div",{className:"modal-body",children:u("div",{className:"setting-item",children:[u("label",{htmlFor:"art-provider",children:"Art Provider"}),u("select",{id:"art-provider",value:r?.ART_PROVIDER||Ke,onChange:_,children:[u("option",{value:"google-arts",children:"Google Arts & Culture"}),u("option",{value:"met-museum",children:"Metropolitan Museum of Art"})]})]})})]})})}function Xe(){const[t,e]=Pe(!1),{currentAsset:r,imageUrl:n,loading:_,error:i,userSettings:l,rotateToNext:a,switchProvider:s}=qe(),c=async o=>{try{await s(o)}finally{e(!1)}},h=()=>{r?.getDetailsUrl&&chrome.tabs.create({url:r.getDetailsUrl()})};return _&&!n?u(Je,{}):i&&!n?u(Ge,{message:i}):u($,{children:[u(Ze,{asset:r,imageUrl:n,loading:_,error:i,onRotate:a,onInfo:h,onSettings:()=>e(!0)}),u(Qe,{isOpen:t,onClose:()=>e(!1),userSettings:l,onProviderChange:c})]})}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("app");t&&Oe(u(Xe,{}),t)})})();
